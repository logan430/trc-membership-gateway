# =============================================================================
# Server Configuration
# =============================================================================
NODE_ENV=development
PORT=3000
APP_URL=http://localhost:3000

# =============================================================================
# Database (Supabase)
# Get from: Supabase Dashboard -> Project Settings -> Database
# Use pooler connection (port 6543) for main URL, direct (port 5432) for migrations
# =============================================================================
DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true
DIRECT_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres

# =============================================================================
# JWT / Session
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Must be at least 32 characters for security
# =============================================================================
JWT_SECRET=

# =============================================================================
# Stripe Keys
# Get from: Stripe Dashboard -> Developers -> API keys
# Use sk_test_... for development, sk_live_... for production
# =============================================================================
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# =============================================================================
# Stripe Price IDs
# Get from: Stripe Dashboard -> Products -> Select product -> Pricing
# Create three products: Individual Monthly, Owner Seat Monthly, Team Seat Monthly
# =============================================================================
STRIPE_INDIVIDUAL_PRICE_ID=price_...
STRIPE_OWNER_SEAT_PRICE_ID=price_...
STRIPE_TEAM_SEAT_PRICE_ID=price_...

# =============================================================================
# Discord OAuth
# Get from: Discord Developer Portal -> Your App -> OAuth2
# =============================================================================
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_REDIRECT_URI=http://localhost:3000/auth/callback

# =============================================================================
# Discord Bot
# Get from: Discord Developer Portal -> Your App -> Bot
# Requires: Server Members Intent, Message Content Intent
# =============================================================================
DISCORD_BOT_TOKEN=
DISCORD_GUILD_ID=
DISCORD_INVITE_URL=https://discord.gg/your-invite-code

# =============================================================================
# Discord Channel IDs
# Get from: Discord -> User Settings -> Advanced -> Enable Developer Mode
# Then: Right-click channel -> Copy ID
# =============================================================================
# Required: Channel where members post introductions
DISCORD_INTRODUCTIONS_CHANNEL_ID=

# Optional: Channel for admin alerts (role sync errors, etc.)
DISCORD_ADMIN_CHANNEL_ID=

# Optional: Channel for members with billing issues (auto-created if not set)
DISCORD_BILLING_SUPPORT_CHANNEL_ID=

# =============================================================================
# Email Configuration
# In development: use console provider (emails logged to terminal)
# In production: use resend provider with verified domain
# =============================================================================
# Options: console (logs to console) or resend (sends real emails)
EMAIL_PROVIDER=console

# Required only if EMAIL_PROVIDER=resend
# Get from: Resend Dashboard -> API Keys
RESEND_API_KEY=re_...

# Email sender details (used in all outbound emails)
EMAIL_FROM_ADDRESS=The Revenue Council <noreply@revenuecouncil.com>
EMAIL_REPLY_TO=support@revenuecouncil.com

# =============================================================================
# Reconciliation (Daily Sync Job)
# Runs daily to verify Stripe/Discord state matches database
# =============================================================================
# Set to true to automatically fix drift (use with caution)
RECONCILIATION_AUTO_FIX=false

# Set to true to pause reconciliation entirely
RECONCILIATION_PAUSED=false

# Timezone and hour for daily run (default: 3 AM Eastern)
RECONCILIATION_TIMEZONE=America/New_York
RECONCILIATION_HOUR=3

# Optional: Email address to receive reconciliation reports
ADMIN_EMAIL=admin@yourdomain.com

# =============================================================================
# Admin Seed (for prisma db seed)
# Creates initial super admin account on first database seed
# =============================================================================
ADMIN_SEED_EMAIL=admin@example.com
ADMIN_SEED_PASSWORD=

# =============================================================================
# Supabase Storage (for resource library)
# Get from: Supabase Dashboard -> Project Settings -> API
# Create private bucket named 'resources' in Storage section
# =============================================================================
SUPABASE_URL=https://[project-ref].supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# =============================================================================
# Malware Scanning (optional - requires ClamAV daemon)
# Install ClamAV and run clamd for malware scanning on uploads
# =============================================================================
# ENABLE_MALWARE_SCAN=true
# CLAMAV_HOST=localhost
# CLAMAV_PORT=3310

# =============================================================================
# Error Monitoring (optional - Sentry)
# Get DSN from: Sentry Dashboard -> Settings -> Client Keys (DSN)
# Sentry is only enabled in production when DSN is set
# =============================================================================
SENTRY_DSN=
