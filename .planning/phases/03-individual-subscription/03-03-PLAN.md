---
phase: 03-individual-subscription
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/routes/public.ts
  - src/index.ts
  - public/index.html
  - public/styles.css
autonomous: true

must_haves:
  truths:
    - "Unauthenticated visitors see The Gatekeeper landing page"
    - "Landing page shows what The Revenue Council is"
    - "Landing page displays membership tiers with pricing"
    - "Landing page has medieval/guild visual theme"
  artifacts:
    - path: "src/routes/public.ts"
      provides: "GET / landing page route"
      exports: ["publicRouter"]
    - path: "public/index.html"
      provides: "The Gatekeeper HTML"
      contains: "Revenue Council"
    - path: "public/styles.css"
      provides: "Medieval theme styles"
      contains: "medieval"
  key_links:
    - from: "src/routes/public.ts"
      to: "public/index.html"
      via: "serve static file"
      pattern: "sendFile|static"
    - from: "public/index.html"
      to: "public/styles.css"
      via: "stylesheet link"
      pattern: "styles\\.css"
---

<objective>
Create The Gatekeeper landing page with medieval/guild visual theme and pricing information.

Purpose: Unpaid visitors need to understand what The Revenue Council is, see membership options, and be guided to sign up. This is the public-facing entry point.

Output:
- GET / serves The Gatekeeper landing page
- Medieval/guild themed HTML/CSS
- Side-by-side pricing cards for Individual and Company tiers
- Clear call-to-action for signup
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-individual-subscription/03-CONTEXT.md
@src/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Public Routes and Static File Serving</name>
  <files>
    src/routes/public.ts
    src/index.ts
  </files>
  <action>
1. Create src/routes/public.ts:
   ```typescript
   import { Router, Request, Response } from 'express';
   import { fileURLToPath } from 'url';
   import { dirname, join } from 'path';

   const __filename = fileURLToPath(import.meta.url);
   const __dirname = dirname(__filename);

   export const publicRouter = Router();

   /**
    * GET /
    * Serve The Gatekeeper landing page
    */
   publicRouter.get('/', (_req: Request, res: Response): void => {
     res.sendFile(join(__dirname, '../../public/index.html'));
   });
   ```

2. Update src/index.ts to serve static files and mount public routes:
   - Add `import express from 'express';` (already exists)
   - Add `import { fileURLToPath } from 'url';`
   - Add `import { dirname, join } from 'path';`
   - Add `import { publicRouter } from './routes/public.js';`
   - Add static file serving BEFORE JSON parser: `app.use(express.static(join(__dirname, '../public')));`
   - Mount public router at root: `app.use(publicRouter);` (AFTER other routes so /health, /auth, etc. take precedence)

Note: Order matters - static files should be served early, but named routes should take precedence over the catch-all landing page.
  </action>
  <verify>
- `npm run build` compiles without errors
- Static files served from /public directory
  </verify>
  <done>
- Public routes configured
- Static file serving enabled
  </done>
</task>

<task type="auto">
  <name>Task 2: The Gatekeeper HTML and Styles</name>
  <files>
    public/index.html
    public/styles.css
  </files>
  <action>
1. Create public directory if not exists: `mkdir -p public`

2. Create public/index.html - The Gatekeeper landing page:
   - Medieval/guild theme (dark background, gold accents, serif fonts)
   - Header with "The Gatekeeper" title and council crest/shield imagery
   - "What is The Revenue Council" section explaining the community
   - Side-by-side pricing cards:
     * Individual: "$X/month" - for individual professionals
     * Company: "$Y/month" - for teams with multiple seats
   - Clear CTA buttons: "Join as Individual" -> /auth/signup, "Join as Company" -> /auth/signup?tier=company
   - Footer with simple links

   Structure:
   ```html
   <!DOCTYPE html>
   <html lang="en">
   <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>The Gatekeeper | The Revenue Council</title>
     <link rel="stylesheet" href="/styles.css">
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
   </head>
   <body>
     <header class="gatekeeper-header">
       <div class="shield-icon"><!-- SVG shield --></div>
       <h1>The Gatekeeper</h1>
       <p class="tagline">Portal to The Revenue Council</p>
     </header>

     <main>
       <section class="about">
         <h2>What is The Revenue Council?</h2>
         <p>An exclusive community of revenue leaders...</p>
       </section>

       <section class="pricing">
         <h2>Choose Your Path</h2>
         <div class="pricing-cards">
           <div class="card individual">
             <h3>Individual</h3>
             <div class="price">$99<span>/month</span></div>
             <ul>
               <li>Full community access</li>
               <li>Member discussions</li>
               <li>Resource library</li>
             </ul>
             <a href="/auth/signup" class="cta-button">Begin Your Journey</a>
           </div>
           <div class="card company">
             <h3>Company</h3>
             <div class="price">$299<span>/month</span></div>
             <ul>
               <li>Everything in Individual</li>
               <li>Up to 5 team seats</li>
               <li>Owner-only channels</li>
             </ul>
             <a href="/auth/signup?tier=company" class="cta-button">Enlist Your Team</a>
           </div>
         </div>
       </section>
     </main>

     <footer>
       <p>&copy; The Revenue Council</p>
     </footer>
   </body>
   </html>
   ```

3. Create public/styles.css with medieval/guild theme:
   - Color palette: Dark background (#1a1a2e, #16213e), Gold accents (#d4af37, #f1c40f), Cream text (#f5f0e1)
   - Typography: Cinzel for headings (serif, medieval feel), Crimson Text for body
   - Card styling: Dark cards with subtle borders, gold hover states
   - Responsive: Mobile-first, cards stack on small screens
   - Shield/crest decoration using CSS or inline SVG

   Key styles:
   ```css
   :root {
     --bg-dark: #1a1a2e;
     --bg-card: #16213e;
     --gold: #d4af37;
     --gold-light: #f1c40f;
     --cream: #f5f0e1;
     --text: #e8e8e8;
   }

   body {
     font-family: 'Crimson Text', Georgia, serif;
     background: var(--bg-dark);
     color: var(--text);
     margin: 0;
     min-height: 100vh;
   }

   h1, h2, h3 {
     font-family: 'Cinzel', serif;
     color: var(--gold);
   }

   .gatekeeper-header {
     text-align: center;
     padding: 4rem 2rem;
     background: linear-gradient(180deg, var(--bg-card) 0%, var(--bg-dark) 100%);
   }

   .pricing-cards {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
     gap: 2rem;
     max-width: 800px;
     margin: 0 auto;
     padding: 2rem;
   }

   .card {
     background: var(--bg-card);
     border: 1px solid var(--gold);
     border-radius: 8px;
     padding: 2rem;
     text-align: center;
   }

   .cta-button {
     display: inline-block;
     background: var(--gold);
     color: var(--bg-dark);
     padding: 1rem 2rem;
     text-decoration: none;
     font-family: 'Cinzel', serif;
     font-weight: 700;
     border-radius: 4px;
     transition: background 0.3s;
   }

   .cta-button:hover {
     background: var(--gold-light);
   }
   ```
  </action>
  <verify>
- public/index.html exists and contains The Revenue Council content
- public/styles.css exists with medieval theme colors
- `npm run build` compiles without errors
- GET / returns the landing page HTML
  </verify>
  <done>
- The Gatekeeper landing page visible at /
- Medieval/guild visual theme applied
- Pricing cards show Individual and Company options
- CTA buttons link to signup
  </done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build`
2. Landing page served: `curl http://localhost:3000/` returns HTML
3. Static assets served: `curl http://localhost:3000/styles.css` returns CSS
4. Medieval theme visible in browser
5. Pricing cards display correctly
</verification>

<success_criteria>
- GET / serves The Gatekeeper landing page
- Medieval/guild theme with dark colors and gold accents
- Cinzel font for headings, Crimson Text for body
- Side-by-side pricing cards for Individual and Company
- CTA buttons link to signup flow
- Responsive design (cards stack on mobile)
</success_criteria>

<output>
After completion, create `.planning/phases/03-individual-subscription/03-03-SUMMARY.md`
</output>
