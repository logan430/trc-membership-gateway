---
phase: 20-accessibility-audit
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/20-accessibility-audit/ACCESSIBILITY-FINDINGS.md
  - .planning/phases/20-accessibility-audit/COLOR-CONTRAST-REPORT.md
  - .planning/phases/20-accessibility-audit/REMEDIATION-CHECKLIST.md
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All form inputs have associated labels documented"
    - "Color contrast failures are identified with specific values"
    - "Focus indicator status is documented for all interactive elements"
    - "Keyboard navigation issues are cataloged"
    - "ARIA label gaps are listed for interactive elements"
  artifacts:
    - path: ".planning/phases/20-accessibility-audit/ACCESSIBILITY-FINDINGS.md"
      provides: "Comprehensive page-by-page accessibility audit"
      contains: "## Page Analysis"
    - path: ".planning/phases/20-accessibility-audit/COLOR-CONTRAST-REPORT.md"
      provides: "Color contrast ratio calculations"
      contains: "## Contrast Ratios"
    - path: ".planning/phases/20-accessibility-audit/REMEDIATION-CHECKLIST.md"
      provides: "Prioritized fix list"
      contains: "## Priority 1"
  key_links:
    - from: "ACCESSIBILITY-FINDINGS.md"
      to: "REMEDIATION-CHECKLIST.md"
      via: "Issues map to fixes"
      pattern: "ISSUE-[0-9]+"
---

<objective>
Audit all 17 HTML pages for WCAG 2.1 AA compliance and document findings.

Purpose: Ensure legal compliance and accessibility for users with disabilities
Output: ACCESSIBILITY-FINDINGS.md with page-by-page issues, COLOR-CONTRAST-REPORT.md with contrast calculations, REMEDIATION-CHECKLIST.md with prioritized fixes
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-accessibility-audit/20-RESEARCH.md
@.planning/AUDIT-CHECKLIST.md

# Key files to audit
@public/styles.css
@public/admin/styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit form labels and ARIA attributes across all pages</name>
  <files>
    .planning/phases/20-accessibility-audit/ACCESSIBILITY-FINDINGS.md
  </files>
  <action>
Audit all 17 HTML pages for form accessibility issues. For each page, check:

**Form Label Association:**
- Every `<input>`, `<select>`, `<textarea>` must have associated `<label for="id">`
- Placeholders do NOT count as labels
- Check table checkboxes (admin/members.html has unlabeled checkboxes - known issue)

**ARIA Attributes:**
- Icon-only buttons need `aria-label` (e.g., close buttons, action buttons)
- SVG elements need `aria-hidden="true"` if decorative OR accessible name if functional
- Error message containers should have `role="alert"` or `aria-live`
- Loading states should have `aria-live="polite"` or `aria-busy`
- Dialog elements should have `aria-labelledby` and `aria-describedby`

**Keyboard Accessibility:**
- All interactive elements must be focusable (no `tabindex="-1"` on buttons)
- Check for `onclick` on non-interactive elements (div, span)
- Verify tab order follows visual order

**Pages to audit (17 total):**
Public: index.html, login.html, signup.html, dashboard.html, claim.html, team-claim.html, team-dashboard.html, checkout-success.html, 404.html
Admin: admin/login.html, admin/dashboard.html, admin/members.html, admin/member-detail.html, admin/config.html, admin/audit.html, admin/admins.html, admin/templates.html

**Document format:**
```markdown
# Accessibility Audit Findings

## Summary
- Total pages audited: 17
- Issues found: [N]
- Critical (blocks usage): [N]
- Major (impacts usability): [N]
- Minor (enhancement): [N]

## Page Analysis

### public/index.html
**ISSUE-001 (Major): SVG shield icon lacks accessible name**
- Element: `<svg viewBox="0 0 100 120"...>`
- Problem: Decorative image not hidden from screen readers
- Fix: Add `aria-hidden="true"` to SVG or `role="img" aria-label="The Revenue Council shield"`

[Continue for each page]
```
  </action>
  <verify>
- File exists at .planning/phases/20-accessibility-audit/ACCESSIBILITY-FINDINGS.md
- All 17 pages are documented
- Each issue has: ID, severity, element, problem, fix
- Issues categorized as Critical/Major/Minor
  </verify>
  <done>
All HTML pages audited for form labels, ARIA attributes, and keyboard accessibility with issues documented and categorized.
  </done>
</task>

<task type="auto">
  <name>Task 2: Calculate color contrast ratios and document failures</name>
  <files>
    .planning/phases/20-accessibility-audit/COLOR-CONTRAST-REPORT.md
  </files>
  <action>
Calculate WCAG AA contrast ratios for all color combinations in the codebase.

**WCAG AA Requirements:**
- Normal text (under 18pt/24px): 4.5:1 minimum
- Large text (18pt+/24px or 14pt bold/18.5px): 3:1 minimum
- UI components (borders, icons): 3:1 minimum

**Colors from styles.css:**
```
--bg-dark: #1a1a2e (background)
--bg-card: #16213e (card background)
--bg-section: #0f0f1a (section background)
--gold: #d4af37 (headings, accents)
--gold-light: #f1c40f (hover states)
--cream: #f5f0e1 (body text alternative)
--text: #e8e8e8 (main body text)
--text-muted: #a0a0a0 (secondary text)
```

**Contrast Calculation Method:**
Use the relative luminance formula:
- L = 0.2126 * R + 0.7152 * G + 0.0722 * B (where R,G,B are linearized)
- Contrast Ratio = (L1 + 0.05) / (L2 + 0.05)

OR reference WebAIM Contrast Checker at https://webaim.org/resources/contrastchecker/

**Combinations to check (minimum):**
1. --gold (#d4af37) on --bg-dark (#1a1a2e) - Headings
2. --text (#e8e8e8) on --bg-dark (#1a1a2e) - Body text
3. --text-muted (#a0a0a0) on --bg-dark (#1a1a2e) - Secondary text (LIKELY FAILS)
4. --cream (#f5f0e1) on --bg-dark (#1a1a2e) - Feature lists
5. --gold (#d4af37) on --bg-card (#16213e) - Card headings
6. --text-muted (#a0a0a0) on --bg-card (#16213e) - Card secondary text
7. Badge colors: green/yellow/red text on semi-transparent backgrounds

**Document format:**
```markdown
# Color Contrast Report

## WCAG AA Requirements
- Normal text: 4.5:1
- Large text: 3:1
- UI components: 3:1

## Contrast Ratios

| Foreground | Background | Usage | Ratio | Required | Status |
|------------|------------|-------|-------|----------|--------|
| #d4af37 | #1a1a2e | Headings (large) | X.XX:1 | 3:1 | PASS/FAIL |
| #e8e8e8 | #1a1a2e | Body text | X.XX:1 | 4.5:1 | PASS/FAIL |
| #a0a0a0 | #1a1a2e | Muted text | X.XX:1 | 4.5:1 | PASS/FAIL |

## Failures Requiring Remediation

### CONTRAST-001: Muted text insufficient contrast
- Colors: #a0a0a0 on #1a1a2e
- Ratio: X.XX:1 (requires 4.5:1)
- Usage: Secondary text, card subtitles
- Fix: Lighten to #b3b3b3 or similar

## Badge Colors

[Similar analysis for status badges]
```
  </action>
  <verify>
- File exists at .planning/phases/20-accessibility-audit/COLOR-CONTRAST-REPORT.md
- All major color combinations tested
- Each combination has: colors, usage, ratio, required, status
- Failures documented with fix recommendations
  </verify>
  <done>
Color contrast ratios calculated for all text/background combinations with WCAG AA pass/fail status documented.
  </done>
</task>

<task type="auto">
  <name>Task 3: Document focus indicators and create remediation checklist</name>
  <files>
    .planning/phases/20-accessibility-audit/REMEDIATION-CHECKLIST.md
  </files>
  <action>
Audit focus indicator visibility and compile all findings into a prioritized remediation checklist.

**Focus Indicator Audit:**

Check styles.css for focus styles:
```css
.form-input:focus {
  outline: none;  /* ISSUE: Removes outline */
  border-color: var(--gold);  /* Border change only */
}
```

Verify each interactive element type:
- Buttons (`.cta-button`, `.form-button`, `.btn-*`)
- Links (`<a>` tags)
- Form inputs (`.form-input`)
- Checkboxes (in tables)
- Select dropdowns
- Dialog buttons

**WCAG 2.4.7 Focus Visible:**
- Focus indicator must be visible
- Should use `:focus-visible` for keyboard-only (preferred)
- Minimum 3:1 contrast with adjacent colors

**Known Issue from code review:**
- `.form-input:focus { outline: none }` removes browser default focus
- Border color change may not be sufficient indicator

**Create Remediation Checklist:**

Compile all issues from Tasks 1-3 into prioritized checklist:

```markdown
# Accessibility Remediation Checklist

## Summary
- Total issues: [N]
- Priority 1 (Critical): [N]
- Priority 2 (Major): [N]
- Priority 3 (Minor): [N]
- Estimated effort: [X] hours

## Priority 1: Critical (Blocks Functionality)

### ISSUE-XXX: [Description]
- **File(s):** [path]
- **Problem:** [what's wrong]
- **Fix:** [specific code change]
- **Effort:** [15-30 min]
- [ ] Fixed
- [ ] Verified

## Priority 2: Major (Significant Impact)

[Similar format]

## Priority 3: Minor (Enhancement)

[Similar format]

## Global CSS Fixes

These fixes apply across all pages:

### FIX-CSS-001: Add visible focus indicators
**File:** public/styles.css
**Add:**
```css
/* Visible focus indicator for keyboard users */
:focus-visible {
  outline: 3px solid var(--gold);
  outline-offset: 2px;
}

/* Remove outline-none patterns */
.form-input:focus {
  /* Remove: outline: none; */
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
}
```

### FIX-CSS-002: Screen reader only utility class
[If not present]

## Testing After Remediation

After fixes applied, verify:
- [ ] Lighthouse accessibility score >= 90
- [ ] axe DevTools shows 0 critical issues
- [ ] Tab through all forms successfully
- [ ] Screen reader announces all form fields
```
  </action>
  <verify>
- File exists at .planning/phases/20-accessibility-audit/REMEDIATION-CHECKLIST.md
- All issues from ACCESSIBILITY-FINDINGS.md included
- All contrast failures from COLOR-CONTRAST-REPORT.md included
- Issues prioritized by severity (Critical > Major > Minor)
- Each issue has specific fix instructions
- Global CSS fixes documented
  </verify>
  <done>
Focus indicators audited, all findings compiled into prioritized REMEDIATION-CHECKLIST.md with specific fix instructions for each issue.
  </done>
</task>

</tasks>

<verification>
Phase verification checklist:
- [ ] ACCESSIBILITY-FINDINGS.md exists with 17 pages audited
- [ ] COLOR-CONTRAST-REPORT.md exists with contrast calculations
- [ ] REMEDIATION-CHECKLIST.md exists with prioritized fixes
- [ ] All form label issues documented
- [ ] All color contrast failures identified
- [ ] All focus indicator issues documented
- [ ] All ARIA label gaps listed
- [ ] Keyboard navigation issues cataloged
- [ ] Issues categorized by severity
- [ ] Fix instructions are specific and actionable
</verification>

<success_criteria>
1. All 17 HTML pages have been audited for WCAG 2.1 AA compliance
2. All form inputs without proper labels are documented
3. All color contrast combinations tested with pass/fail status
4. Focus indicator status documented for interactive elements
5. Keyboard navigation issues identified
6. ARIA label gaps listed for icons, buttons, and dynamic content
7. Remediation checklist has prioritized fixes with effort estimates
8. Documentation follows audit format established in prior phases (15-19)
</success_criteria>

<output>
After completion, create `.planning/phases/20-accessibility-audit/20-01-SUMMARY.md`
</output>
