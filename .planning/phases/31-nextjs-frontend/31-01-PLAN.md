---
phase: 31-nextjs-frontend
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - dashboard/package.json
  - dashboard/tsconfig.json
  - dashboard/next.config.ts
  - dashboard/postcss.config.mjs
  - dashboard/src/app/globals.css
  - dashboard/src/app/layout.tsx
  - dashboard/src/app/page.tsx
autonomous: true

must_haves:
  truths:
    - "Next.js 15 app boots successfully on port 3000"
    - "Tailwind v4 CSS compiles and applies styles"
    - "Medieval pixel theme variables are accessible via CSS custom properties"
  artifacts:
    - path: "dashboard/package.json"
      provides: "Next.js 15 app dependencies"
      contains: "next"
    - path: "dashboard/src/app/globals.css"
      provides: "Tailwind v4 theme with medieval pixel styling"
      contains: "@import \"tailwindcss\""
    - path: "dashboard/src/app/layout.tsx"
      provides: "Root layout with theme classes"
      contains: "RootLayout"
  key_links:
    - from: "dashboard/postcss.config.mjs"
      to: "@tailwindcss/postcss"
      via: "PostCSS plugin configuration"
      pattern: "@tailwindcss/postcss"
---

<objective>
Create the Next.js 15.1 application foundation in a `dashboard/` subdirectory with Tailwind CSS v4 configured using CSS-first theme variables.

Purpose: Establish the React frontend foundation that will host the member dashboard, using the medieval pixel aesthetic defined in CONTEXT.md.

Output: A bootable Next.js app with Tailwind v4 styling and theme variables for parchment backgrounds, gold accents, and pixel-style utilities.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-nextjs-frontend/31-CONTEXT.md
@.planning/phases/31-nextjs-frontend/31-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js 15 application</name>
  <files>
    dashboard/package.json
    dashboard/tsconfig.json
    dashboard/next.config.ts
    dashboard/postcss.config.mjs
    dashboard/.gitignore
  </files>
  <action>
Create the Next.js 15 app in a `dashboard/` subdirectory. Do NOT use create-next-app (it creates unnecessary files). Instead, manually create the minimal structure:

1. Create `dashboard/package.json`:
```json
{
  "name": "trc-dashboard",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start -p 3000",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "^15.1.0",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "jose": "^6.1.3",
    "recharts": "^3.5.0",
    "lucide-react": "^0.560.0"
  },
  "devDependencies": {
    "@types/node": "^22.0.0",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "typescript": "^5.7.0",
    "tailwindcss": "^4.0.0",
    "@tailwindcss/postcss": "^4.0.0"
  }
}
```

2. Create `dashboard/tsconfig.json`:
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [{ "name": "next" }],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

3. Create `dashboard/next.config.ts`:
```typescript
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  // Standalone output for production deployment
  output: 'standalone',
  // Disable x-powered-by header
  poweredByHeader: false,
};

export default nextConfig;
```

4. Create `dashboard/postcss.config.mjs`:
```javascript
const config = {
  plugins: {
    '@tailwindcss/postcss': {},
  },
};

export default config;
```

5. Create `dashboard/.gitignore`:
```
# dependencies
node_modules
.pnp
.pnp.js

# testing
coverage

# next.js
.next/
out/

# production
build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*

# local env files
.env*.local

# typescript
*.tsbuildinfo
next-env.d.ts
```
  </action>
  <verify>
Files exist at correct paths:
- `ls dashboard/package.json`
- `ls dashboard/tsconfig.json`
- `ls dashboard/next.config.ts`
- `ls dashboard/postcss.config.mjs`
  </verify>
  <done>Next.js 15 app config files created in dashboard/ subdirectory</done>
</task>

<task type="auto">
  <name>Task 2: Create Tailwind v4 theme with medieval pixel styling</name>
  <files>
    dashboard/src/app/globals.css
    dashboard/src/app/layout.tsx
    dashboard/src/app/page.tsx
  </files>
  <action>
Create the CSS-first Tailwind v4 theme per CONTEXT.md decisions.

1. Create `dashboard/src/app/globals.css`:
```css
@import "tailwindcss";

/* Medieval Pixel Theme - The Revenue Council Dashboard */
/* Per CONTEXT.md: Parchment backgrounds, gold accents, pixel-style borders */

:root {
  /* Core palette */
  --background: #faf8f5;           /* Parchment background */
  --foreground: #334155;           /* Slate/charcoal primary */
  --card: #fffef9;                 /* Card parchment */
  --card-foreground: #334155;

  /* Gold accents - medieval theme */
  --gold: #d4a017;
  --gold-light: #f4d03f;
  --gold-dark: #b8860b;

  /* Supporting colors */
  --accent: #e8e4db;               /* Aged parchment accent */
  --accent-foreground: #334155;
  --muted: #f0ece4;
  --muted-foreground: #64748b;
  --border: #d1c7b5;               /* Parchment edge */
  --input: #d1c7b5;

  /* Semantic colors */
  --destructive: #dc2626;
  --destructive-foreground: #fef2f2;
  --success: #16a34a;
  --success-foreground: #f0fdf4;

  /* Pixel styling parameters */
  --pixel-border-width: 2px;
  --pixel-shadow-offset: 3px;
  --radius: 8px;                   /* Per success criteria */
}

/* Tailwind v4 theme registration */
@theme inline {
  /* Colors */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-gold: var(--gold);
  --color-gold-light: var(--gold-light);
  --color-gold-dark: var(--gold-dark);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);

  /* Radius */
  --radius-default: var(--radius);
  --radius-sm: calc(var(--radius) - 2px);
  --radius-lg: calc(var(--radius) + 4px);

  /* Fonts */
  --font-sans: "Inter", system-ui, -apple-system, sans-serif;
}

/* Base styles */
body {
  background-color: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
}

/* Pixel-style utility classes per CONTEXT.md */
/* Hard-edge offset shadows (no blur) */
.pixel-shadow {
  box-shadow: var(--pixel-shadow-offset) var(--pixel-shadow-offset) 0px 0px rgba(51, 65, 85, 0.2);
}

.pixel-shadow-sm {
  box-shadow: 2px 2px 0px 0px rgba(51, 65, 85, 0.15);
}

.pixel-shadow-lg {
  box-shadow: 4px 4px 0px 0px rgba(51, 65, 85, 0.25);
}

/* Gold shadows for accents */
.pixel-shadow-gold {
  box-shadow: var(--pixel-shadow-offset) var(--pixel-shadow-offset) 0px 0px rgba(212, 160, 23, 0.3);
}

/* Pixel-style borders (thick, 2-3px) */
.pixel-border {
  border-width: var(--pixel-border-width);
  border-style: solid;
}

/* Hover scale effect per CONTEXT.md (1.02x grow) */
.hover-lift {
  transition: transform 0.15s ease-in-out;
}

.hover-lift:hover {
  transform: scale(1.02);
}

/* Gold sparkle animation for success feedback */
@keyframes sparkle {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; filter: brightness(1.2); }
}

.animate-sparkle {
  animation: sparkle 0.6s ease-in-out;
}

/* Gold coins stacking animation for loader */
@keyframes coin-stack {
  0%, 100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  50% {
    transform: translateY(-8px) scale(0.95);
    opacity: 0.8;
  }
}

.animate-coin-stack {
  animation: coin-stack 1s ease-in-out infinite;
}
```

2. Create `dashboard/src/app/layout.tsx`:
```tsx
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';

const inter = Inter({
  subsets: ['latin'],
  display: 'swap',
  variable: '--font-inter',
});

export const metadata: Metadata = {
  title: 'The Revenue Council - Dashboard',
  description: 'Member dashboard for The Revenue Council community',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en" className={inter.variable}>
      <body className="min-h-screen bg-background text-foreground antialiased">
        {children}
      </body>
    </html>
  );
}
```

3. Create `dashboard/src/app/page.tsx`:
```tsx
export default function Home() {
  return (
    <main className="min-h-screen flex items-center justify-center p-8">
      <div className="bg-card rounded-[8px] pixel-border border-border pixel-shadow p-8 max-w-md text-center">
        <h1 className="text-2xl font-bold text-foreground mb-4">
          The Revenue Council
        </h1>
        <p className="text-muted-foreground mb-6">
          Welcome to your guild dashboard. Authentication required.
        </p>
        <div className="inline-flex items-center gap-2 px-4 py-2 bg-gold text-foreground font-semibold rounded-[8px] pixel-shadow-gold">
          <span>Gold Theme Active</span>
        </div>
      </div>
    </main>
  );
}
```
  </action>
  <verify>
Files exist and contain theme:
- `grep "@import" dashboard/src/app/globals.css` (should show tailwindcss import)
- `grep "pixel-shadow" dashboard/src/app/globals.css` (should show utility classes)
- `grep "RootLayout" dashboard/src/app/layout.tsx` (should show layout component)
  </verify>
  <done>Tailwind v4 theme with medieval pixel utilities configured</done>
</task>

<task type="auto">
  <name>Task 3: Install dependencies and verify app boots</name>
  <files>
    dashboard/node_modules/
    dashboard/package-lock.json
  </files>
  <action>
Install dependencies and verify the Next.js app boots.

1. Navigate to dashboard directory and install:
```bash
cd dashboard && npm install
```

2. Verify the app builds (catches config errors):
```bash
cd dashboard && npm run build
```

3. Start in development mode briefly to verify boot:
```bash
cd dashboard && timeout 10s npm run dev || true
```
(Timeout after 10s - we just need to see it starts without errors)

Expected output on start: "Ready in Xms" or similar Next.js success message.

If build fails with Tailwind errors, verify:
- postcss.config.mjs uses `'@tailwindcss/postcss': {}` (not tailwindcss)
- globals.css uses `@import "tailwindcss"` (not @tailwind directives)
  </action>
  <verify>
- `ls dashboard/node_modules/next` (dependencies installed)
- `ls dashboard/.next` (build output exists)
- No build errors in terminal output
  </verify>
  <done>Next.js 15 app boots successfully with Tailwind v4 styling</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `cd dashboard && npm run build` completes without errors
2. `cd dashboard && npm run dev` shows "Ready" message
3. Visit http://localhost:3000 shows parchment-colored page with pixel-shadow card
4. Page displays "The Revenue Council" heading with gold accent element
</verification>

<success_criteria>
- Next.js 15.1 app boots on port 3000
- Tailwind v4 CSS compiles without errors
- Medieval theme variables (--gold, --background, --pixel-shadow-offset) accessible
- Test page renders with pixel-shadow and border-radius styling
</success_criteria>

<output>
After completion, create `.planning/phases/31-nextjs-frontend/31-01-SUMMARY.md`
</output>
